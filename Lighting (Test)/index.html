<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sparse Dot Hover 3D Shapes</title>
<style>
  :root {
    --bg: #ffffff;
    --dot: #000000;
  }

  html, body {
    height: 100%;
    margin: 0;
    background: var(--bg);
    font-family: system-ui, Arial, sans-serif;
    overflow: hidden;
  }

  .wrap {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 2rem;
  }

  .dot {
    width: 20px;
    height: 20px;
    background: var(--dot);
    border-radius: 50%;
    cursor: pointer;
    transition: opacity .2s ease;
    position: relative;
  }

  .shape {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%) scale(0.3) rotate(0deg);
    opacity: 0;
    pointer-events: none;
    will-change: transform, opacity, filter;
    transition: opacity 2s ease;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.3), rgba(0,0,0,0.1));
    box-shadow: 0 0 12px rgba(0,0,0,0.15);
  }

  /* shape types */
  .shape.oval { border-radius: 50% / 30%; }
  .shape.square { border-radius: 15%; }
  .shape.rect { border-radius: 12%; }

  .shape.pop {
    animation: popAnim var(--dur, 6s) cubic-bezier(.22,1,.3,1) forwards;
  }

  @keyframes popAnim {
    0% {
      transform: translate(-50%, -50%) scale(0.2) rotate(var(--r1,0deg));
      opacity: 0;
      filter: blur(var(--b1,2px));
    }
    10% { opacity: 1; }
    50% {
      transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) scale(var(--s,1)) rotate(var(--r1,20deg));
      filter: blur(var(--b1,3px));
    }
    90% { opacity: 1; }
    100% {
      transform: translate(calc(-50% + var(--x2)), calc(-50% + var(--y2))) scale(var(--s2,1)) rotate(var(--r2,40deg));
      opacity: 0;
      filter: blur(var(--b2,10px)); /* most blurry at the end */
    }
  }
</style>
</head>
<body>
<div class="wrap" id="dotGrid"></div>

<script>
const PALETTE = ["#FF9900","#FF4E4E","#FF7DBC","#7DA2FF","#FFD37D","#62D282","#4251D6"];
const SHAPES = ['oval','square','rect'];
const grid = document.getElementById('dotGrid');

// Create 10 dots
for(let i=0; i<10; i++){
    const dot = document.createElement('div');
    dot.className = 'dot';
    grid.appendChild(dot);

    dot.addEventListener('mouseenter', () => createShapes(dot));
}

function createShapes(dot){
    // briefly hide dot
    dot.style.opacity = 0;
    setTimeout(() => dot.style.opacity = 1, 300);

    const shapeCount = 5 + Math.floor(Math.random()*7);

    for(let i=0;i<shapeCount;i++){
        const shapeType = randomChoice(SHAPES);
        const shape = document.createElement('div');
        shape.className = `shape ${shapeType}`;

        const c1 = randomChoice(PALETTE);
        const c2 = randomChoice(PALETTE);
        // add radial gradient to create depth
        shape.style.background = `radial-gradient(circle at 30% 30%, ${c1} 0%, ${c2} 70%, transparent 100%)`;

        let width = 20 + Math.random()*50;
        let height = 10 + Math.random()*20;
        if(shapeType === 'oval') { width = 50 + Math.random()*60; height = 15 + Math.random()*25; }

        shape.style.width = `${width}px`;
        shape.style.height = `${height}px`;

        const x = (Math.random()-0.5) * 150;
        const y = (Math.random()-0.5) * 150;
        const x2 = (Math.random()-0.5) * 500;
        const y2 = (Math.random()-0.5) * 400;
        const s = 0.8 + Math.random()*1.2;
        const s2 = 0.8 + Math.random()*1.5;
        const r1 = Math.round((Math.random()-0.5)*60) + 'deg';
        const r2 = Math.round((Math.random()-0.5)*360) + 'deg';
        const b1 = 2 + Math.random()*3;
        const b2 = 6 + Math.random()*4;
        const dur = 6 + Math.random()*4;

        shape.style.setProperty('--x', `${x}px`);
        shape.style.setProperty('--y', `${y}px`);
        shape.style.setProperty('--x2', `${x2}px`);
        shape.style.setProperty('--y2', `${y2}px`);
        shape.style.setProperty('--s', s);
        shape.style.setProperty('--s2', s2);
        shape.style.setProperty('--r1', r1);
        shape.style.setProperty('--r2', r2);
        shape.style.setProperty('--b1', `${b1}px`);
        shape.style.setProperty('--b2', `${b2}px`);
        shape.style.setProperty('--dur', `${dur}s`);

        dot.appendChild(shape);

        const delay = Math.random()*200;
        setTimeout(()=> shape.classList.add('pop'), delay);

        shape.addEventListener('animationend', () => shape.remove());
    }
}

function randomChoice(arr){ return arr[Math.floor(Math.random() * arr.length)]; }
</script>
</body>
</html>
